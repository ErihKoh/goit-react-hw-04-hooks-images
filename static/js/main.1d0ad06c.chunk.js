(this["webpackJsonpgoit-react-hw-04-hooks-images"]=this["webpackJsonpgoit-react-hw-04-hooks-images"]||[]).push([[0],{10:function(e,t,a){e.exports={ImageGalleryItem:"ImageGalleryItem_ImageGalleryItem__Bfhca",ImageGalleryItemImage:"ImageGalleryItem_ImageGalleryItemImage__3cNlM"}},11:function(e,t,a){e.exports={Overlay:"Modal_Overlay__1W1A6",Modal:"Modal_Modal__332we"}},14:function(e,t,a){e.exports={ImageGallery:"ImageGallery_ImageGallery__3h0Sa"}},15:function(e,t,a){e.exports={Button:"Button_Button__3QylH"}},21:function(e,t,a){},45:function(e,t,a){},46:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a(0),c=a.n(r),o=a(3),i=a.n(o),l=(a(21),a(12)),s=a(4),u=a(8),m=a(13),h=a.n(m),j=(a(43),a(44),a(5)),b=a.n(j);function g(e){var t=e.onSubmit,a=Object(r.useState)(""),c=Object(s.a)(a,2),o=c[0],i=c[1];return Object(n.jsx)("div",{children:Object(n.jsx)("header",{className:b.a.Searchbar,children:Object(n.jsxs)("form",{className:b.a.SearchForm,onSubmit:function(e){e.preventDefault(),""!==o.trim()?(t(o),i("")):u.b.error("\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0437\u0430\u043f\u0440\u043e\u0441.")},children:[Object(n.jsx)("input",{className:b.a.SearchFormInput,type:"text",autoComplete:"off",autoFocus:!0,placeholder:"Search images and photos",name:"imageQuery",value:o,onChange:function(e){i(e.currentTarget.value.toLowerCase())}}),Object(n.jsx)("button",{type:"submit",className:b.a.SearchFormButton,children:Object(n.jsx)("span",{className:b.a.SearchFormButtonLabel,children:"Search"})})]})})})}var d=a(10),f=a.n(d);var O=function(e){var t=e.images,a=e.onClick;return Object(n.jsx)(n.Fragment,{children:t.map((function(e){return Object(n.jsx)("li",{className:f.a.ImageGalleryItem,onClick:a,children:Object(n.jsx)("img",{className:f.a.ImageGalleryItemImage,src:e.webformatURL,"data-image":e.largeImageURL,alt:""})},e.id)}))})},v=a(14),p=a.n(v);var S=function(e){var t=e.images,a=e.onClick;return Object(n.jsx)("ul",{className:p.a.ImageGallery,children:Object(n.jsx)(O,{images:t,onClick:a})})},_=a(15),y=a.n(_);var x=function(e){var t=e.onClick;return Object(n.jsx)("button",{type:"button",className:y.a.Button,onClick:t,children:"Load more"})},I=a(11),B=a.n(I),F=document.querySelector("#modal-root");function C(e){Object(r.useEffect)((function(){return window.addEventListener("keydown",t),function(){return window.removeEventListener("keydown",t)}}));var t=function(t){"Escape"===t.code&&e.onClose()};return Object(o.createPortal)(Object(n.jsx)("div",{className:B.a.Overlay,onClick:function(t){t.currentTarget===t.target&&e.onClose()},children:Object(n.jsx)("div",{className:B.a.Modal,children:e.children})}),F)}var k="18969292-6634fe46747360e3150bf5a1e",w="https://pixabay.com/api";var N={fetchImage:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.imageQuery,a=void 0===t?"":t,n=e.currentPage,r=void 0===n?1:n;return fetch("".concat(w,"/?image_type=photo&orientation=horizontal&q=").concat(a,"&page=").concat(r,"&per_page=12&key=").concat(k)).then((function(e){return e.ok?e.json():Promise.reject(new Error("\u041f\u043e \u0432\u0430\u0448\u0435\u043c\u0443 \u0437\u0430\u043f\u0440\u043e\u0441\u0443 \u043d\u0438\u0447\u0435\u0433\u043e \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u043e ".concat(a)))}))}};a(45);function G(){var e=Object(r.useState)([]),t=Object(s.a)(e,2),a=t[0],c=t[1],o=Object(r.useState)(1),i=Object(s.a)(o,2),m=i[0],j=i[1],b=Object(r.useState)(""),d=Object(s.a)(b,2),f=d[0],O=d[1],v=Object(r.useState)(""),p=Object(s.a)(v,2),_=p[0],y=p[1],I=Object(r.useState)(!1),B=Object(s.a)(I,2),F=B[0],k=B[1],w=Object(r.useState)(null),G=Object(s.a)(w,2),L=(G[0],G[1]);Object(r.useEffect)((function(){if(""!==f){var e={currentPage:m,imageQuery:f};k(!0),N.fetchImage(e).then((function(e){var t=e.hits;return c([].concat(Object(l.a)(a),Object(l.a)(t)))})).then((function(){window.scrollTo({top:document.body.scrollHeight,behavior:"smooth"})})).catch((function(e){return L(e)})).finally((function(){return k(!1)}))}}),[m,f]);return Object(n.jsxs)("div",{className:"App",children:[Object(n.jsx)(g,{onSubmit:function(e){O(e),j(1),c([])}}),Object(n.jsx)(S,{images:a,onClick:function(e){e.preventDefault(),"IMG"===e.target.nodeName&&y(e.target.dataset.image)}}),Object(n.jsx)("div",{className:"spinner",children:F&&Object(n.jsx)(h.a,{type:"BallTriangle",color:"#00BFFF",height:80,width:80})}),a.length>0&&Object(n.jsx)(x,{onClick:function(){return j(m+1)}}),_&&Object(n.jsx)(C,{onClose:function(){y("")},children:Object(n.jsx)("img",{src:_,alt:"modal"})}),Object(n.jsx)(u.a,{autoClose:2e3})]})}var L=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,49)).then((function(t){var a=t.getCLS,n=t.getFID,r=t.getFCP,c=t.getLCP,o=t.getTTFB;a(e),n(e),r(e),c(e),o(e)}))};i.a.render(Object(n.jsx)(c.a.StrictMode,{children:Object(n.jsx)(G,{})}),document.getElementById("root")),L()},5:function(e,t,a){e.exports={Searchbar:"SearchBar_Searchbar__1DBhN",SearchForm:"SearchBar_SearchForm__1gnv9",SearchFormButton:"SearchBar_SearchFormButton__1hOSl",SearchFormButtonLabel:"SearchBar_SearchFormButtonLabel__2vPy1",SearchFormInput:"SearchBar_SearchFormInput__3PeHA"}}},[[46,1,2]]]);
//# sourceMappingURL=main.1d0ad06c.chunk.js.map